const c=document.getElementById("carousel"),p=document.querySelectorAll(".card"),v=document.getElementById("prevBtn"),g=document.getElementById("nextBtn");let r=0;const y=160;g.addEventListener("click",()=>{r+=y,r>=c.scrollWidth-c.clientWidth&&(r=0),c.scrollTo({left:r,behavior:"smooth"})});v.addEventListener("click",()=>{r-=y,r<0&&(r=c.scrollWidth-c.clientWidth),c.scrollTo({left:r,behavior:"smooth"})});document.getElementById("categorySearch").addEventListener("input",function(){const e=this.value.toLowerCase();p.forEach(t=>{const o=t.textContent.toLowerCase().includes(e);t.style.display=o?"block":"none"})});let i=null,d=null;const h={mobile:["iPhone 14","Samsung Galaxy S22","Otro"],desktop:["iMac M1","HP Pavilion","Otro"],tablet:["iPad Air","Galaxy Tab","Otro"],camera:["Canon EOS","Nikon Z50"],game:["PlayStation 5","Xbox Series X"],industrial:["Siemens Control","Mitsubishi PLC"],others:["Otro dispositivo 1","Otro dispositivo 2"]};function S(e){const t=document.getElementById("modelsContainer");t.innerHTML="",(h[e]||[]).forEach(o=>{const n=document.createElement("div");n.className="model-card",n.innerText=o,n.addEventListener("click",()=>{document.querySelectorAll(".model-card").forEach(u=>u.classList.remove("selected")),n.classList.add("selected"),d=o}),t.appendChild(n)})}p.forEach(e=>{e.addEventListener("click",()=>{i=e.dataset.category,document.querySelector(".step-1").classList.remove("active"),document.querySelector(".step-1").classList.add("hidden"),document.querySelector(".step-2").classList.remove("hidden"),document.querySelector(".step-2").classList.add("active"),S(i)})});let m=null;const E={"iPhone 14":["Pantalla rota","Batería agotada","No enciende"],"Samsung Galaxy S22":["Puerto de carga dañado","Pantalla negra","Se reinicia solo"],Otro:["Batería","Bloqueo","Virus"],"iMac M1":["Pantalla no responde","Ventilador ruidoso"],"HP Pavilion":["Problemas de arranque","Teclado no funciona"],Otro:["Sobrecalentamiento","Instalación de software","Pantalla","Teclado"],"iPad Air":["Pantalla quebrada","Problemas de audio","Software","Virus"],"Galaxy Tab":["Wifi no funciona","No reconoce el cargador","Software","Virus"],"Canon EOS":["Lente atascado","No toma fotos"],"Nikon Z50":["Error de tarjeta","Pantalla no enciende"],"PlayStation 5":["No da imagen","No lee discos"],"Xbox Series X":["Ruido extraño","No arranca"],"Siemens Control":["Fallo de comunicación","Pantalla apagada"],"Mitsubishi PLC":["Error de sistema","No se conecta"],"Otro dispositivo 1":["Problema 1","Problema 2"],"Otro dispositivo 2":["Problema 3","Problema 4"]};function L(e){const t=document.getElementById("problemsContainer");t.innerHTML="",(E[e]||["Otro problema"]).forEach(o=>{const n=document.createElement("div");n.className="problem-card",n.innerText=o,n.addEventListener("click",()=>{document.querySelectorAll(".problem-card").forEach(u=>u.classList.remove("selected")),n.classList.add("selected"),m=o}),t.appendChild(n)})}document.getElementById("goToStep3").addEventListener("click",()=>{if(!d){alert("Por favor selecciona un modelo.");return}document.querySelector(".step-2").classList.remove("active"),document.querySelector(".step-2").classList.add("hidden"),document.querySelector(".step-3").classList.remove("hidden"),document.querySelector(".step-3").classList.add("active"),L(d)});let s=null,l=null;const P=["09:00 AM","10:00 AM","11:00 AM","01:00 PM","02:00 PM","03:00 PM","04:00 PM"];document.getElementById("goToStep4").addEventListener("click",()=>{if(!m){alert("Por favor selecciona un problema.");return}document.querySelector(".step-3").classList.remove("active"),document.querySelector(".step-3").classList.add("hidden"),document.querySelector(".step-4").classList.remove("hidden"),document.querySelector(".step-4").classList.add("active"),f(),b()});function f(){const e=new Date().toISOString().split("T")[0];document.getElementById("datePicker").setAttribute("min",e)}document.getElementById("datePicker").addEventListener("change",e=>{s=e.target.value});function b(){const e=document.getElementById("timeSlots");e.innerHTML="",P.forEach(t=>{const o=document.createElement("div");o.className="time-slot",o.innerText=t,o.addEventListener("click",()=>{document.querySelectorAll(".time-slot").forEach(n=>n.classList.remove("selected")),o.classList.add("selected"),l=t}),e.appendChild(o)})}let a={};document.getElementById("goToStep5").addEventListener("click",()=>{var e,t;if(s=(e=document.getElementById("datePicker"))==null?void 0:e.value,l=(t=document.querySelector(".time-slot.selected"))==null?void 0:t.innerText,!s||!l){alert("Por favor selecciona una fecha y hora.");return}document.querySelector(".step-4").classList.remove("active"),document.querySelector(".step-4").classList.add("hidden"),document.querySelector(".step-5").classList.remove("hidden"),document.querySelector(".step-5").classList.add("active")});document.getElementById("goToStep6").addEventListener("click",()=>{const e=document.getElementById("clientName").value.trim(),t=document.getElementById("clientEmail").value.trim(),o=document.getElementById("clientPhone").value.trim();if(!e||!t||!o){alert("Por favor complete todos los campos.");return}a={name:e,email:t,phone:o},document.querySelector(".step-5").classList.remove("active"),document.querySelector(".step-5").classList.add("hidden"),document.querySelector(".step-6").classList.remove("hidden"),document.querySelector(".step-6").classList.add("active"),q()});function q(){const e=document.getElementById("summaryContainer");e.innerHTML=`
    <p><strong>Categoría:</strong> ${i}</p>
    <p><strong>Modelo:</strong> ${d}</p>
    <p><strong>Problema:</strong> ${m}</p>
    <p><strong>Fecha:</strong> ${s}</p>
    <p><strong>Hora:</strong> ${l}</p>
    <p><strong>Nombre:</strong> ${a.name}</p>
    <p><strong>Email:</strong> ${a.email}</p>
    <p><strong>Teléfono:</strong> ${a.phone}</p>
  `}document.getElementById("submitAppointment").addEventListener("click",()=>{if(!s||!l||!a.name||!a.email||!a.phone){alert("Por favor completa todos los datos antes de confirmar.");return}const e={category:i,model:d,problem:m,date:s,time:l,name:a.name,email:a.email,phone:a.phone};fetch("/appointments",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{t.success?alert("¡Cita agendada correctamente! Revisa tu correo."):alert("Ocurrió un error al guardar la cita.")}).catch(t=>{console.error("Error al enviar la cita:",t),alert("Error al enviar la cita.")})});
